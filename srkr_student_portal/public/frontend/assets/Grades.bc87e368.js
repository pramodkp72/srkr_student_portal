import{s as C,f as i,g as E,h as P,u as c,o as f,c as g,a as $,b as r,w as h,d as D,D as R,i as S,r as N}from"./index.ca232e49.js";import{g as v}from"./index.f78ccc25.js";import{_ as j}from"./MissingData.d1591763.js";const I={key:0},O={class:"px-5 py-4"},V={key:1},q={__name:"Grades",setup(A){const{getCurrentProgram:b,getStudentInfo:k}=C();let d=k().value,w=b().value;const p=i([]),u=i(""),l=i({columns:[{label:"Course",key:"course"},{label:"Batch",key:"batch"}],rows:[]});E({url:"srkr_student_portal.education.api.get_student_programs",makeParams(){return{student:d.name}},onSuccess:t=>{let e=[];t.forEach(s=>{e.push({label:s.program,onClick:()=>u.value=s.program})}),u.value=e[e.length-1].label,p.value=e},auto:!0});const y=P({doctype:"Assessment Result",fields:["name","student_group","course","assessment_group","total_score","maximum_score","grade"],filters:{student:d.name,program:w.program},transform:()=>{},onSuccess:t=>{let e=v(t,o=>o.assessment_group),s=Object.keys(e);x(s);let a=v(t,o=>o.course);Object.keys(a).forEach(o=>{let n={};n.course=o,n.batch=a[o][0].student_group,s.forEach(_=>{let m=e[_].find(B=>B.course===o);n[_]=m?`${m.total_score}/${m.maximum_score}`:"-"}),l.value.rows.push(n)})},auto:!0}),x=t=>{t.forEach(e=>{let s={};s.label=e,s.key=e,l.value.columns.push(s)})};return(t,e)=>{var a;const s=N("Button");return((a=c(y).data)==null?void 0:a.length)>0?(f(),g("div",I,[$("div",O,[r(c(R),{class:"mb-4",options:p.value},{default:h(({open:o})=>[r(s,{label:u.value},{suffix:h(()=>[r(c(D),{name:o?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),_:2},1032,["label"])]),_:1},8,["options"]),r(c(S),{class:"h-[250px]",columns:l.value.columns,rows:l.value.rows,options:{selectable:!1,showTooltip:!1,onRowClick:()=>{}},"row-key":"id"},null,8,["columns","rows"])])])):(f(),g("div",V,[r(j,{message:"No grades found ooioioiiioioi custom app"})]))}}};export{q as default};
