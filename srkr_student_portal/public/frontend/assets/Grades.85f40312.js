import{s as C,f as i,g as E,h as P,u as c,o as f,c as g,a as $,b as r,w as h,d as D,D as R,i as S,r as N}from"./index.45141fd3.js";import{g as v}from"./index.548d9c96.js";import{_ as j}from"./MissingData.1c025231.js";const I={key:0},O={class:"px-5 py-4"},V={key:1},q={__name:"Grades",setup(A){const{getCurrentProgram:b,getStudentInfo:k}=C();let d=k().value,w=b().value;const _=i([]),u=i(""),l=i({columns:[{label:"Course",key:"course"},{label:"Batch",key:"batch"}],rows:[]});E({url:"education.education.api.get_student_programs",makeParams(){return{student:d.name}},onSuccess:a=>{let e=[];a.forEach(s=>{e.push({label:s.program,onClick:()=>u.value=s.program})}),u.value=e[e.length-1].label,_.value=e},auto:!0});const y=P({doctype:"Assessment Result",fields:["name","student_group","course","assessment_group","total_score","maximum_score","grade"],filters:{student:d.name,program:w.program},transform:()=>{},onSuccess:a=>{let e=v(a,o=>o.assessment_group),s=Object.keys(e);x(s);let t=v(a,o=>o.course);Object.keys(t).forEach(o=>{let n={};n.course=o,n.batch=t[o][0].student_group,s.forEach(p=>{let m=e[p].find(B=>B.course===o);n[p]=m?`${m.total_score}/${m.maximum_score}`:"-"}),l.value.rows.push(n)})},auto:!0}),x=a=>{a.forEach(e=>{let s={};s.label=e,s.key=e,l.value.columns.push(s)})};return(a,e)=>{var t;const s=N("Button");return((t=c(y).data)==null?void 0:t.length)>0?(f(),g("div",I,[$("div",O,[r(c(R),{class:"mb-4",options:_.value},{default:h(({open:o})=>[r(s,{label:u.value},{suffix:h(()=>[r(c(D),{name:o?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),_:2},1032,["label"])]),_:1},8,["options"]),r(c(S),{class:"h-[250px]",columns:l.value.columns,rows:l.value.rows,options:{selectable:!1,showTooltip:!1,onRowClick:()=>{}},"row-key":"id"},null,8,["columns","rows"])])])):(f(),g("div",V,[r(j,{message:"No grades found ooioioiiioioi"})]))}}};export{q as default};
