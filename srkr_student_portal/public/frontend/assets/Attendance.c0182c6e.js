import{K as be,f as W,o as h,c as w,F as te,m as ne,a as c,n as Q,t as T,q as J,u as l,v as ie,b as F,x as q,w as Z,d as G,P as ye,L as de,M as fe,s as $e,N as xe,O as De,k as we,l as Me,g as me,D as ke,Q as Se,y as Oe,r as Ce}from"./index.ca232e49.js";import{E as he}from"./ErrorMessage.e4637cfc.js";import{a as Le,g as Ve,c as ve}from"./index.f78ccc25.js";var pe={exports:{}};(function(d,E){(function(i,k){d.exports=k()})(be,function(){var i=1e3,k=6e4,S=36e5,D="millisecond",b="second",y="minute",O="hour",_="day",v="week",C="month",u="quarter",p="year",M="date",$="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,A=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,H={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(a){var n=["th","st","nd","rd"],e=a%100;return"["+a+(n[(e-20)%10]||n[e]||n[0])+"]"}},z=function(a,n,e){var r=String(a);return!r||r.length>=n?a:""+Array(n+1-r.length).join(e)+a},oe={s:z,z:function(a){var n=-a.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+z(r,2,"0")+":"+z(t,2,"0")},m:function a(n,e){if(n.date()<e.date())return-a(e,n);var r=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(r,C),s=e-t<0,o=n.clone().add(r+(s?-1:1),C);return+(-(r+(e-t)/(s?t-o:o-t))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:C,y:p,w:v,d:_,D:M,h:O,m:y,s:b,ms:D,Q:u}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},K="en",B={};B[K]=H;var ue="$isDayjsObject",le=function(a){return a instanceof ae||!(!a||!a[ue])},re=function a(n,e,r){var t;if(!n)return K;if(typeof n=="string"){var s=n.toLowerCase();B[s]&&(t=s),e&&(B[s]=e,t=s);var o=n.split("-");if(!t&&o.length>1)return a(o[0])}else{var g=n.name;B[g]=n,t=g}return!r&&t&&(K=t),t||!r&&K},L=function(a,n){if(le(a))return a.clone();var e=typeof n=="object"?n:{};return e.date=a,e.args=arguments,new ae(e)},m=oe;m.l=re,m.i=le,m.w=function(a,n){return L(a,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var ae=function(){function a(e){this.$L=re(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[ue]=!0}var n=a.prototype;return n.parse=function(e){this.$d=function(r){var t=r.date,s=r.utc;if(t===null)return new Date(NaN);if(m.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var o=t.match(f);if(o){var g=o[2]-1||0,x=(o[7]||"0").substring(0,3);return s?new Date(Date.UTC(o[1],g,o[3]||1,o[4]||0,o[5]||0,o[6]||0,x)):new Date(o[1],g,o[3]||1,o[4]||0,o[5]||0,o[6]||0,x)}}return new Date(t)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return m},n.isValid=function(){return this.$d.toString()!==$},n.isSame=function(e,r){var t=L(e);return this.startOf(r)<=t&&t<=this.endOf(r)},n.isAfter=function(e,r){return L(e)<this.startOf(r)},n.isBefore=function(e,r){return this.endOf(r)<L(e)},n.$g=function(e,r,t){return m.u(e)?this[r]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,r){var t=this,s=!!m.u(r)||r,o=m.p(e),g=function(P,N){var U=m.w(t.$u?Date.UTC(t.$y,N,P):new Date(t.$y,N,P),t);return s?U:U.endOf(_)},x=function(P,N){return m.w(t.toDate()[P].apply(t.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(N)),t)},V=this.$W,Y=this.$M,j=this.$D,R="set"+(this.$u?"UTC":"");switch(o){case p:return s?g(1,0):g(31,11);case C:return s?g(1,Y):g(0,Y+1);case v:var I=this.$locale().weekStart||0,X=(V<I?V+7:V)-I;return g(s?j-X:j+(6-X),Y);case _:case M:return x(R+"Hours",0);case O:return x(R+"Minutes",1);case y:return x(R+"Seconds",2);case b:return x(R+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,r){var t,s=m.p(e),o="set"+(this.$u?"UTC":""),g=(t={},t[_]=o+"Date",t[M]=o+"Date",t[C]=o+"Month",t[p]=o+"FullYear",t[O]=o+"Hours",t[y]=o+"Minutes",t[b]=o+"Seconds",t[D]=o+"Milliseconds",t)[s],x=s===_?this.$D+(r-this.$W):r;if(s===C||s===p){var V=this.clone().set(M,1);V.$d[g](x),V.init(),this.$d=V.set(M,Math.min(this.$D,V.daysInMonth())).$d}else g&&this.$d[g](x);return this.init(),this},n.set=function(e,r){return this.clone().$set(e,r)},n.get=function(e){return this[m.p(e)]()},n.add=function(e,r){var t,s=this;e=Number(e);var o=m.p(r),g=function(Y){var j=L(s);return m.w(j.date(j.date()+Math.round(Y*e)),s)};if(o===C)return this.set(C,this.$M+e);if(o===p)return this.set(p,this.$y+e);if(o===_)return g(1);if(o===v)return g(7);var x=(t={},t[y]=k,t[O]=S,t[b]=i,t)[o]||1,V=this.$d.getTime()+e*x;return m.w(V,this)},n.subtract=function(e,r){return this.add(-1*e,r)},n.format=function(e){var r=this,t=this.$locale();if(!this.isValid())return t.invalidDate||$;var s=e||"YYYY-MM-DDTHH:mm:ssZ",o=m.z(this),g=this.$H,x=this.$m,V=this.$M,Y=t.weekdays,j=t.months,R=t.meridiem,I=function(N,U,ee,se){return N&&(N[U]||N(r,s))||ee[U].slice(0,se)},X=function(N){return m.s(g%12||12,N,"0")},P=R||function(N,U,ee){var se=N<12?"AM":"PM";return ee?se.toLowerCase():se};return s.replace(A,function(N,U){return U||function(ee){switch(ee){case"YY":return String(r.$y).slice(-2);case"YYYY":return m.s(r.$y,4,"0");case"M":return V+1;case"MM":return m.s(V+1,2,"0");case"MMM":return I(t.monthsShort,V,j,3);case"MMMM":return I(j,V);case"D":return r.$D;case"DD":return m.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return I(t.weekdaysMin,r.$W,Y,2);case"ddd":return I(t.weekdaysShort,r.$W,Y,3);case"dddd":return Y[r.$W];case"H":return String(g);case"HH":return m.s(g,2,"0");case"h":return X(1);case"hh":return X(2);case"a":return P(g,x,!0);case"A":return P(g,x,!1);case"m":return String(x);case"mm":return m.s(x,2,"0");case"s":return String(r.$s);case"ss":return m.s(r.$s,2,"0");case"SSS":return m.s(r.$ms,3,"0");case"Z":return o}return null}(N)||o.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,r,t){var s,o=this,g=m.p(r),x=L(e),V=(x.utcOffset()-this.utcOffset())*k,Y=this-x,j=function(){return m.m(o,x)};switch(g){case p:s=j()/12;break;case C:s=j();break;case u:s=j()/3;break;case v:s=(Y-V)/6048e5;break;case _:s=(Y-V)/864e5;break;case O:s=Y/S;break;case y:s=Y/k;break;case b:s=Y/i;break;default:s=Y}return t?s:m.a(s)},n.daysInMonth=function(){return this.endOf(C).$D},n.$locale=function(){return B[this.$L]},n.locale=function(e,r){if(!e)return this.$L;var t=this.clone(),s=re(e,r,!0);return s&&(t.$L=s),t},n.clone=function(){return m.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},a}(),ce=ae.prototype;return L.prototype=ce,[["$ms",D],["$s",b],["$m",y],["$H",O],["$W",_],["$M",C],["$y",p],["$D",M]].forEach(function(a){ce[a[1]]=function(n){return this.$g(n,a[0],a[1])}}),L.extend=function(a,n){return a.$i||(a(n,ae,L),a.$i=!0),L},L.locale=re,L.isDayjs=le,L.unix=function(a){return L(1e3*a)},L.en=B[K],L.Ls=B,L.p={},L})})(pe);var ge=pe.exports;const Te={class:"flex flex-col gap-4"},Ae={class:"grid grid-cols-1 gap-4"},Ye={class:"mb-2 text-sm text-gray-600"},Fe={key:1},Ne={__name:"NewLeave",props:{newLeave:{type:Object,required:!0}},setup(d){const E=d,{newLeave:i}=E,k=W(!1),S=W(!1),D=W("");function b(_,v){return v=ge(i.to_date),_=ge(i.from_date),v.diff(_,"d")||0}function y(_=0,v){_<0?v==="from_date"?(S.value=!0,D.value="From Date must be before To Date",i.total_days=0):v==="to_date"&&(k.value=!0,D.value="To Date must be after From Date",i.total_days=0):(S.value=!1,k.value=!1,i.total_days=_+1)}const O=[{section:"Leave Details",fields:[{label:"Student",name:"student",type:"data",readonly:!0}]},{section:"Date Details",fields:[{label:"From Date",name:"from_date",type:"date",change:_=>{let v=b(i.from_date,i.to_date);y(v,"from_date")}},{label:"To Date",name:"to_date",type:"date",change:_=>{let v=b(i.from_date,i.to_date);y(v,"to_date")}},{label:"Total Days",name:"total_days",type:"number",readonly:!0},{label:"Reason",name:"reason",type:"textarea"}]}];return(_,v)=>(h(),w("div",Te,[(h(),w(te,null,ne(O,C=>c("div",{key:C.section},[c("div",Ae,[(h(!0),w(te,null,ne(C.fields,u=>(h(),w("div",{key:u.name,class:Q(u.hidden&&"hidden")},[c("div",Ye,T(u.label),1),u.type==="select"?(h(),J(l(ie),{key:0,type:"select",options:u.options,modelValue:l(i)[u.name],"onUpdate:modelValue":p=>l(i)[u.name]=p,default:u.default,onChange:p=>u.change(p.target.value)},null,8,["options","modelValue","onUpdate:modelValue","default","onChange"])):u.type==="date"?(h(),w("div",Fe,[F(l(ie),{type:"date",modelValue:l(i)[u.name],"onUpdate:modelValue":p=>l(i)[u.name]=p,onChange:p=>u.change(p.target.value)},null,8,["modelValue","onUpdate:modelValue","onChange"]),S.value&&u.name==="from_date"?(h(),J(l(he),{key:0,message:D.value,class:"pt-2"},null,8,["message"])):q("",!0),k.value&&u.name==="to_date"?(h(),J(l(he),{key:1,message:D.value,class:"pt-2"},null,8,["message"])):q("",!0)])):(h(),J(l(ie),{key:2,type:u.type,modelValue:l(i)[u.name],"onUpdate:modelValue":p=>l(i)[u.name]=p,placeholder:u.placeholder,disabled:u.readonly},null,8,["type","modelValue","onUpdate:modelValue","placeholder","disabled"]))],2))),128))])])),64))]))}},je=["onClick"],Ee={class:"flex flex-col whitespace-nowrap w-fit overflow-hidden"},He={class:"font-medium text-sm text-gray-800 text-ellipsis"},Ue={key:0,class:"font-normal text-xs text-gray-800 text-ellipsis"},Je={class:"flex flex-col gap-5 pt-5 px-6 pb-6"},We={class:"font-semibold text-xl"},Be={class:"flex flex-col gap-4"},Ie={class:"flex gap-2 items-center"},Pe={class:"text-sm font-normal"},Ge={key:0,class:"flex gap-2 items-center"},qe={class:"text-sm font-normal"},ze={key:1,class:"flex gap-2 items-center"},Re={class:"text-sm font-normal"},Ze={key:2,class:"flex gap-2 items-center"},Qe={class:"text-sm font-normal"},Ke={class:"flex gap-3 relative px-2 items-start"},Xe={class:"flex flex-col whitespace-nowrap w-fit overflow-hidden"},et={class:"font-medium text-sm text-gray-800 text-ellipsis"},tt={key:0,class:"font-normal text-xs text-gray-800 text-ellipsis"},nt={__name:"CalendarEvent",props:{event:{type:Object,required:!0},date:{type:Date,required:!0}},setup(d){const E=d;let i={blue:{background_color:"bg-blue-100",border_color:"border-blue-600"},green:{background_color:"bg-green-100",border_color:"border-green-600"},red:{background_color:"bg-red-100",border_color:"border-red-600"},orange:{background_color:"bg-orange-100",border_color:"border-orange-600"},yellow:{background_color:"bg-yellow-100",border_color:"border-yellow-600"},teal:{background_color:"bg-teal-100",border_color:"border-teal-600"},violet:{background_color:"bg-violet-100",border_color:"border-violet-600"},cyan:{background_color:"bg-cyan-100",border_color:"border-cyan-600"},purple:{background_color:"bg-purple-100",border_color:"border-purple-600"},pink:{background_color:"bg-pink-100",border_color:"border-pink-600"},amber:{background_color:"bg-amber-100",border_color:"border-amber-600"}};function k(){let S=E.date.toDateString().split(" ").slice(0,3),D=S[0],b=S[1]+" "+S[2];return`${D}, ${b}`}return(S,D)=>d.event.status?(h(),w("div",{key:1,class:Q(["w-full p-2 rounded-md",d.event.background_color||"bg-green-100"]),onClick:D[0]||(D[0]=(...b)=>S.togglePopover&&S.togglePopover(...b))},[c("div",Ke,[F(l(G),{name:"circle",class:"h-4 text-black"}),c("div",Xe,[c("p",et,T(d.event.title),1),d.event.from_time?(h(),w("p",tt,T(d.event.from_time)+" - "+T(d.event.to_time),1)):q("",!0)])])],2)):(h(),J(l(ye),{key:0,placement:"right"},{target:Z(({togglePopover:b})=>{var y,O,_,v;return[c("div",{class:Q(["w-full p-2 rounded-lg",((O=l(i)[(y=d.event)==null?void 0:y.color])==null?void 0:O.background_color)||"bg-green-100"]),onClick:b},[c("div",{class:Q(["flex gap-3 relative px-2 items-start",d.event.from_time&&["border-l-2",((v=l(i)[(_=d.event)==null?void 0:_.color])==null?void 0:v.border_color)||"border-green-600"]])},[F(l(G),{name:"circle",class:"h-4 text-black"}),c("div",Ee,[c("p",He,T(d.event.title),1),d.event.from_time?(h(),w("p",Ue,T(d.event.from_time)+" - "+T(d.event.to_time),1)):q("",!0)])],2)],10,je)]}),"body-main":Z(()=>[c("div",Je,[c("div",We,T(d.event.title),1),c("div",Be,[c("div",Ie,[F(l(G),{name:"calendar",class:"h-4 w-4"}),c("span",Pe,T(k()),1)]),d.event.with?(h(),w("div",Ge,[F(l(G),{name:"user",class:"h-4 w-4"}),c("span",qe,T(d.event.with),1)])):q("",!0),d.event.from_time&&d.event.to_time?(h(),w("div",ze,[F(l(G),{name:"clock",class:"h-4 w-4"}),c("span",Re,T(d.event.from_time)+" - "+T(d.event.to_time),1)])):q("",!0),d.event.room?(h(),w("div",Ze,[F(l(G),{name:"circle",class:"h-4 w-4"}),c("span",Qe," Room No: \xA0 "+T(d.event.room),1)])):q("",!0)])])]),_:1}))}},rt={class:"p-5 h-full"},at={class:"flex justify-between mb-2"},st={class:"text-xl font-medium"},ot={class:"flex gap-x-1"},lt={class:"h-[92%] min-h-[600px] min-w-[600px]"},it={class:"grid grid-cols-7 w-full pb-2"},ut={class:"text-center text-gray-600 font-normal text-sm"},ct={class:"grid grid-cols-7 border-t-[1px] border-l-[1px] h-full w-full grid-rows-6"},dt={class:"border-r-[1px] border-b-[1px] border-gray-200"},ft={key:0,class:"relative flex flex-col items-center w-full overflow-y-auto"},mt={class:"w-full"},ht={key:1},_e={__name:"Calendar",props:{events:{type:Object,required:!1}},setup(d){const E=d;let i=W(new Date().getMonth()),k=W(new Date().getFullYear()),S=["January","February","March","April","May","June","July","August","September","October","November","December"],D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],y=de(()=>Le(i.value,k.value)),O=de(()=>Ve(E.events,M=>M.date));function _(M){let $=M.getDate(),f=M.getMonth()+1,A=M.getFullYear();return $<10&&($="0"+$),f<10&&(f="0"+f),`${A}-${f}-${$}`}function v(){return S[i.value]}function C(){i.value++,i.value>11&&(i.value=0,k.value++)}function u(){i.value--,i.value<0&&(i.value=11,k.value--)}function p(M){return M.getMonth()===i.value}return(M,$)=>(h(),w("div",rt,[c("div",at,[c("span",st,T(v()+", "+l(k)),1),c("div",ot,[F(l(fe),{onClick:u,variant:"ghost",class:"h-4 w-4",icon:"chevron-left"}),F(l(fe),{onClick:C,variant:"ghost",class:"h-4 w-4",icon:"chevron-right"})])]),c("div",lt,[c("div",it,[(h(!0),w(te,null,ne(l(b),f=>(h(),w("span",ut,T(f),1))),256))]),c("div",ct,[(h(!0),w(te,null,ne(l(y),f=>(h(),w("div",dt,[c("div",{class:Q(["flex justify-center h-full font-normal mx-2",p(f)?"text-gray-500":"text-gray-200"])},[p(f)?(h(),w("div",ft,[c("span",{class:Q(["py-1 sticky top-0 bg-white w-full text-center z-10",f.toDateString()===new Date().toDateString()&&"font-bold"])},T(f.getDate()),3),c("div",mt,[(h(!0),w(te,null,ne(l(O)[_(f)],A=>(h(),J(nt,{event:A,date:f,class:"mb-2 cursor-pointer w-full",draggable:!1,key:A.name},null,8,["event","date"]))),128))])])):(h(),w("span",ht,T(l(D)[f.getMonth()]+" "+f.getDate()),1))],2)]))),256))])])]))}},vt={class:"py-4 flex flex-col"},gt={class:"px-5 flex items-center gap-2"},_t={class:"font-semibold text-2xl"},pt={class:"h-full"},bt={class:"flex flex-row-reverse gap-2"},Dt={__name:"Attendance",setup(d){var M;const{getCurrentProgram:E,getStudentInfo:i,getStudentGroups:k}=$e(),S=W((M=E().value)==null?void 0:M.program);let D=i().value;const{isAttendancePage:b}=xe(De());we(()=>{_()});const y=W("Select Student Group"),O=W();function _(){O.value=k().value,O.value.forEach($=>$.onClick=()=>{$.label!==y.value&&(y.value=$.label,u.reload())}),y.value=O.value[0].label||"Select Student Group",u.update({params:{student_group:y.value,student:D.name}}),u.reload()}const v=Me({student:D.name,student_name:D.student_name,from_date:"",to_date:"",reason:"",total_days:""}),C={Present:"bg-green-100",Absent:"bg-red-200",Leave:"bg-orange-100"},u=me({url:"srkr_student_portal.education.api.get_student_attendance",params:{student_group:y.value,student:D.name},transform:$=>{$=$.filter((A,H,z)=>H===z.findIndex(oe=>oe.date===A.date));let f=[];return $.forEach(A=>{f.push({name:A.name,title:A.status,background_color:C[A.status],date:A.date,status:A.status})}),f},onError:$=>{console.log("Error",$)}}),p=me({url:"srkr_student_portal.education.api.apply_leave",params:{leave_data:v,program_name:S.value},onSuccess:()=>{b.value=!1,u.reload(),ve({title:"Attendance Applied Successful",icon:"check",iconClasses:"text-green-600"})},onError:$=>{var f;ve({title:(f=$.messages[0])!=null?f:"Error Occured",icon:"x",iconClasses:"text-red-600"})}});return($,f)=>{const A=Ce("Button");return h(),w("div",vt,[c("div",gt,[c("h2",_t,T(S.value),1),F(l(ke),{options:O.value},{default:Z(({open:H})=>[F(A,{label:y.value},{suffix:Z(()=>[F(l(G),{name:H?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),_:2},1032,["label"])]),_:1},8,["options"])]),c("div",pt,[!l(u).loading&&l(u).data?(h(),J(_e,{key:0,events:l(u).data},null,8,["events"])):(h(),J(_e,{key:1,events:[]}))]),F(l(Oe),{modelValue:l(b),"onUpdate:modelValue":f[1]||(f[1]=H=>Se(b)?b.value=H:null),options:{size:"2xl",title:"Apply Leave",actions:[{label:"Save",variant:"solid"}]}},{"body-content":Z(()=>[F(Ne,{newLeave:v},null,8,["newLeave"])]),actions:Z(({close:H})=>[c("div",bt,[F(A,{disabled:!v.from_date||!v.to_date||!v.total_days||!v.reason,variant:"solid",label:"Save",onClick:f[0]||(f[0]=z=>l(p).submit())},null,8,["disabled"])])]),_:1},8,["modelValue"])])}}};export{Dt as default};
